<?xml version="1.0" encoding="utf-8" ?>
<odoo>

    <record id="syscoon_financeinterface_form_view" model="ir.ui.view">
        <field name="name">syscoon.financeinterface.form.view</field>
        <field name="model">syscoon.financeinterface</field>
        <field name="arch" type="xml">
            <form string="Datev Import">
                <header>
                    <button string="Export" name="action_export" invisible= "state != 'draft'" type="object"/>
                    <button string="Reset" name="action_draft" invisible= "state == 'draft'" type="object"/>
                    <field name="state" widget="statusbar"/>
                </header>
                <sheet string="Datev Export">
                    <div class="oe_title">
                        <h1>
                            <field name="name"/>
                        </h1>
                    </div>
                    <group>
                        <group>
                            <field name="mode" readonly= "state != 'draft'"/>
                            <field name="is_range_needed" invisible="1"/>
                             <field name="is_type_selction_hidden" invisible="1"/>
                            <field name="is_journal_needed" invisible="1"/>
                        </group>
                        <group>
                            <field name="type"  readonly="state != 'draft'" invisible="is_type_selction_hidden"/>
                            <label for="start_date" string="Date" invisible="type != 'date'" />
                            <label for="start_date" string="Period" invisible="type != 'date_range'"/>
                            <div>
                                <field name="start_date" class="oe_inline" readonly="state != 'draft'"/>
                                <span invisible="type != 'date_range'"> to </span>
                                <field name="end_date" class="oe_inline" required="not is_range_needed" invisible="type != 'date_range'" readonly="state != 'draft'"/>
                            </div>
                        </group>
                    </group>
                    <group invisible="not is_journal_needed" required="is_journal_needed">
                        <field name="journal_ids" colspan="2" readonly="state != 'draft'" widget="many2many_tags"/>
                    </group>
                    <notebook>
                        <page string="Logs" invisible="not log">
                            <field name="log" nolabel="1" colspan="2" readonly="1"/>
                        </page>
                        <page id="export_moves" string="Moves / Invoices" invisible="not account_moves_ids">
                           <strong> <label for="account_moves_count" string="Number of Exported Records:"/><field  name="account_moves_count"/></strong>
                            <field colspan="2" nolabel="1" name="account_moves_ids"/>
                        </page>
                    </notebook>
                </sheet>
                 <!-- Chatter -->
                <chatter/>
            </form>
        </field>
    </record>

    <record id="syscoon_financeinterface_list_view" model="ir.ui.view">
        <field name="name">syscoon.financeinterface.list.view</field>
        <field name="model">syscoon.financeinterface</field>
        <field name="arch" type="xml">
            <list decoration-info="state == 'draft'" decoration-success="state == 'export'" decoration-warning="log and state == 'export'" decoration-danger="log and state != 'export'">
                <field name="name"/>
                <field name="mode"/>
                <field name="start_date"/>
                <field name="end_date" invisible="type != 'date_range'"/>
                <field name="journal_ids" widget="many2many_tags" invisible="not is_journal_needed"/>
                <field name="state"/>
                <field name="log" column_invisible="1"/>
                <field name="is_journal_needed" column_invisible="1"/>
                <field name="type" column_invisible="1"/>

            </list>
        </field>
    </record>

    <record id="syscoon_financeinterface_search_view" model="ir.ui.view">
        <field name="name">syscoon.financeinterface.searc.view</field>
        <field name="model">syscoon.financeinterface</field>
        <field name="arch" type="xml">
            <search string="Search Finance Interface">
                <field name="name"/>
                <field name="mode"/>
                <field name="start_date"/>
                <field name="end_date"/>
            </search>
        </field>
    </record>

    <record id="syscoon_financeinterface_action" model="ir.actions.act_window">
        <field name="name">Financial Exports</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">syscoon.financeinterface</field>
        <field name="view_id" ref="syscoon_financeinterface_list_view"/>
        <field name="search_view_id" ref="syscoon_financeinterface_search_view"/>
    </record>

</odoo>
